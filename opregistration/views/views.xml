<odoo>
  <data>


   <record model="ir.ui.view" id="opregistration.list">
    <field name="name">OPD Registration</field>
    <field name="model">opregistration</field>
    <field name="arch" type="xml">
     <form string="OPD Registration">
      <group>
       <field name = "partner_id" string = "Patient Name"/>
       <field name = "registration"/>
       <field name = "providerlink"/>
       <field name = "date"/>
       <field name = "type"/>
       <field name = "fee"/>
       <field name = "freecare" invisible="1"/>
      </group>
      <group name="diagnosislines"> 
       <field name="diagl" string="Diagnosis">
        <tree editable="bottom">
          <field name = "diagnosis" string="Diagnosis"/>
          <field name="code" string ="ICD Code"/>
        </tree>
       </field>
      </group>
     </form> 
    </field>
   </record>

  <record model="ir.ui.view" id="opregistration_tree">
    <field name="name">OPD Registration</field>
    <field name="model">opregistration</field>
    <field name="arch" type="xml">
     <tree default_order="create_date asc">
       <field name = "partner_id" string = "Patient Name"/>
       <field name = "registration"/>
       <field name = "providerlink"/>
       <field name = "date"/>
       <field name = "type"/>
       <field name = "fee" invisible="1"/>
       <field name = "freecare" string="Free Care" invisible="1"/>
       <field name="diagl" string="Diagnosis"/>

     </tree> 
    </field>
   </record>


   <record id="opregistration_menu_action" model="ir.actions.act_window">
    <field name="name">OPD Registration</field>
    <field name="res_model">opregistration</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{"search_default_today_filter":1}</field>
   </record>



  <act_window id="wizard_menu_action"
                name="Daily OPD Report"
                res_model="opregistration.wizard"
                view_mode="form"
                target="new"/>


  <act_window id="meddaily_menu_action"
                name="Daily Medications Report"
                res_model="opregistration.meddaily"
                view_mode="form"
                target="new"/>



 <record id="opregistration_search" model="ir.ui.view">
            <field name="name">OPD Registration Search</field>
            <field name="model">opregistration</field>
            <field name="mode">primary</field>
            <field name="arch" type="xml">
               <search>
                <filter string="Today's Appointments" name="today_filter" domain="[('date', '=', datetime.datetime.now().strftime('%Y-%m-%d'))]" context="{'group_by':'providerlink'}" />
          </search>
            </field>
        </record>










<menuitem id="opregistration_menu" parent="sanker.main_menu" name="Out Patient Department"/>
<menuitem id="main_opregistration_menu" parent="opregistration_menu" name="OPD Registration" action="opregistration_menu_action"/>
<menuitem id="wizard_menu" parent="opregistration_menu" name="OPD Daily report" action="wizard_menu_action"/>
<menuitem id="medaily_menu" parent="opregistration_menu" name="Medicine Refills Daily report" action="meddaily_menu_action"/>


<record model="ir.ui.view" id="wizard_form_view">
<field name="name">wizard.form</field>
<field name="model">opregistration.wizard</field>
<field name="arch" type="xml">
<form string="Select Date">
  <group>
   <field name="dateselect"/>
   </group>
<footer>
                    <button name="get_report" string="Get Report" type="object" class="oe_highlight"/>
                    <button string="Cancel" special="cancel"/>
                </footer>

    </form>
            </field>
 </record>




<record model="ir.ui.view" id="meddaily_form_view">
<field name="name">meddaily.form</field>
<field name="model">opregistration.meddaily</field>
<field name="arch" type="xml">
<form string="Select Date">
  <group>
   <field name="dateselect"/>
   </group>
<footer>
                    <button name="get_report" string="Get Report" type="object" class="oe_highlight"/>
                    <button string="Cancel" special="cancel"/>
                </footer>
</form>
            </field>
</record>

   </data>
</odoo>
